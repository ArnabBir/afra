/* */ 
"format cjs";
(function(process) {
  define(["doh", "../date"], function(doh, date) {
    doh.register("tests.date.util", [function test_date_getDaysInMonth(t) {
      t.is(31, date.getDaysInMonth(new Date(2006, 0, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 2, 1)));
      t.is(30, date.getDaysInMonth(new Date(2006, 3, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 4, 1)));
      t.is(30, date.getDaysInMonth(new Date(2006, 5, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 6, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 7, 1)));
      t.is(30, date.getDaysInMonth(new Date(2006, 8, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 9, 1)));
      t.is(30, date.getDaysInMonth(new Date(2006, 10, 1)));
      t.is(31, date.getDaysInMonth(new Date(2006, 11, 1)));
      t.is(28, date.getDaysInMonth(new Date(2006, 1, 1)));
      t.is(29, date.getDaysInMonth(new Date(2004, 1, 1)));
      t.is(29, date.getDaysInMonth(new Date(2000, 1, 1)));
      t.is(28, date.getDaysInMonth(new Date(1900, 1, 1)));
      t.is(28, date.getDaysInMonth(new Date(1800, 1, 1)));
      t.is(28, date.getDaysInMonth(new Date(1700, 1, 1)));
      t.is(29, date.getDaysInMonth(new Date(1600, 1, 1)));
    }, function test_date_isLeapYear(t) {
      t.f(date.isLeapYear(new Date(2006, 0, 1)));
      t.t(date.isLeapYear(new Date(2004, 0, 1)));
      t.t(date.isLeapYear(new Date(2000, 0, 1)));
      t.f(date.isLeapYear(new Date(1900, 0, 1)));
      t.f(date.isLeapYear(new Date(1800, 0, 1)));
      t.f(date.isLeapYear(new Date(1700, 0, 1)));
      t.t(date.isLeapYear(new Date(1600, 0, 1)));
    }, function test_date_getTimezoneName(t) {
      function FakeDate(str, strLocale) {
        this.str = str || '';
        this.strLocale = strLocale || '';
        this.toString = function() {
          return this.str;
        };
        this.toLocaleString = function() {
          return this.strLocale;
        };
      }
      var dt = new FakeDate();
      dt.str = 'Sun Sep 17 2006 22:25:51 GMT-0500 (CDT)';
      dt.strLocale = 'Sun 17 Sep 2006 10:25:51 PM CDT';
      t.is('CDT', date.getTimezoneName(dt));
      dt.str = 'Sun Sep 17 2006 22:55:01 GMT-0500';
      dt.strLocale = 'September 17, 2006 10:55:01 PM CDT';
      t.is('CDT', date.getTimezoneName(dt));
      dt.str = 'Sun Sep 17 2006 22:57:18 GMT-0500 (CDT)';
      dt.strLocale = 'Sun Sep 17 22:57:18 2006';
      t.is('CDT', date.getTimezoneName(dt));
      dt.str = 'Sun, 17 Sep 2006 22:58:06 GMT-0500';
      dt.strLocale = 'Sunday September 17, 22:58:06 GMT-0500 2006';
      t.is('', date.getTimezoneName(dt));
      dt.str = 'Mon Sep 18 11:21:07 CDT 2006';
      dt.strLocale = 'Monday, September 18, 2006 11:21:07 AM';
      t.is('CDT', date.getTimezoneName(dt));
      dt.str = 'Mon, 18 Sep 2006 13:30:32 GMT-0500';
      dt.strLocale = 'Monday September 18, 13:30:32 GMT-0500 2006';
      t.is('', date.getTimezoneName(dt));
      dt.str = 'Mon Sep 18 13:49:22 CDT 2006';
      dt.strLocale = 'Monday, September 18, 2006 1:49:22 PM';
      t.is('CDT', date.getTimezoneName(dt));
    }]);
    doh.register("tests.date.math", [function test_date_compare(t) {
      var d1 = new Date();
      d1.setHours(0);
      var d2 = new Date();
      d2.setFullYear(2005);
      d2.setHours(12);
      t.is(0, date.compare(d1, d1));
      t.is(1, date.compare(d1, d2, "date"));
      t.is(-1, date.compare(d2, d1, "date"));
      t.is(-1, date.compare(d1, d2, "time"));
      t.is(1, date.compare(d1, d2, "datetime"));
    }, function test_date_add(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "year";
      dtA = new Date(2005, 11, 27);
      dtB = new Date(2006, 11, 27);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2005, 11, 27);
      dtB = new Date(2004, 11, 27);
      t.is(dtB, date.add(dtA, interv, -1));
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2001, 1, 28);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2005, 1, 28);
      t.is(dtB, date.add(dtA, interv, 5));
      dtA = new Date(1900, 11, 31);
      dtB = new Date(1930, 11, 31);
      t.is(dtB, date.add(dtA, interv, 30));
      dtA = new Date(1995, 11, 31);
      dtB = new Date(2030, 11, 31);
      t.is(dtB, date.add(dtA, interv, 35));
      interv = "quarter";
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2000, 3, 1);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2000, 7, 29);
      t.is(dtB, date.add(dtA, interv, 2));
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2001, 1, 28);
      t.is(dtB, date.add(dtA, interv, 4));
      interv = "month";
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2000, 1, 1);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 0, 31);
      dtB = new Date(2000, 1, 29);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2001, 1, 28);
      t.is(dtB, date.add(dtA, interv, 12));
      interv = "week";
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2000, 0, 8);
      t.is(dtB, date.add(dtA, interv, 1));
      interv = "day";
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2000, 0, 2);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2001, 0, 1);
      dtB = new Date(2002, 0, 1);
      t.is(dtB, date.add(dtA, interv, 365));
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2001, 0, 1);
      t.is(dtB, date.add(dtA, interv, 366));
      dtA = new Date(2000, 1, 28);
      dtB = new Date(2000, 1, 29);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2001, 1, 28);
      dtB = new Date(2001, 2, 1);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 2, 1);
      dtB = new Date(2000, 1, 29);
      t.is(dtB, date.add(dtA, interv, -1));
      dtA = new Date(2001, 2, 1);
      dtB = new Date(2001, 1, 28);
      t.is(dtB, date.add(dtA, interv, -1));
      dtA = new Date(2000, 0, 1);
      dtB = new Date(1999, 11, 31);
      t.is(dtB, date.add(dtA, interv, -1));
      interv = "weekday";
      dtA = new Date(2000, 0, 1);
      dtB = new Date(2000, 0, 3);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 0, 2);
      dtB = new Date(2000, 0, 3);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 0, 2);
      dtB = new Date(2000, 0, 7);
      t.is(dtB, date.add(dtA, interv, 5));
      dtA = new Date(2000, 0, 2);
      dtB = new Date(2000, 0, 10);
      t.is(dtB, date.add(dtA, interv, 6));
      dtA = new Date(2000, 0, 3);
      dtB = new Date(2000, 0, 17);
      t.is(dtB, date.add(dtA, interv, 10));
      dtA = new Date(2000, 0, 8);
      dtB = new Date(2000, 0, 3);
      t.is(dtB, date.add(dtA, interv, -5));
      dtA = new Date(2000, 0, 9);
      dtB = new Date(2000, 0, 5);
      t.is(dtB, date.add(dtA, interv, -3));
      dtA = new Date(2000, 0, 23);
      dtB = new Date(2000, 0, 7);
      t.is(dtB, date.add(dtA, interv, -11));
      interv = "hour";
      dtA = new Date(2000, 0, 1, 11);
      dtB = new Date(2000, 0, 1, 12);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2001, 9, 28, 0);
      dtB = new Date(dtA.getTime() + (60 * 60 * 1000));
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2001, 9, 28, 23);
      dtB = new Date(2001, 9, 29, 0);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2001, 11, 31, 23);
      dtB = new Date(2002, 0, 1, 0);
      t.is(dtB, date.add(dtA, interv, 1));
      interv = "minute";
      dtA = new Date(2000, 11, 31, 23, 59);
      dtB = new Date(2001, 0, 1, 0, 0);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 11, 27, 12, 2);
      dtB = new Date(2000, 11, 27, 13, 2);
      t.is(dtB, date.add(dtA, interv, 60));
      interv = "second";
      dtA = new Date(2000, 11, 31, 23, 59, 59);
      dtB = new Date(2001, 0, 1, 0, 0, 0);
      t.is(dtB, date.add(dtA, interv, 1));
      dtA = new Date(2000, 11, 27, 8, 10, 59);
      dtB = new Date(2000, 11, 27, 8, 11, 59);
      t.is(dtB, date.add(dtA, interv, 60));
    }, function test_date_diff(t) {
      var dtA = null;
      var dtB = null;
      var interv = '';
      interv = "year";
      dtA = new Date(2005, 11, 27);
      dtB = new Date(2006, 11, 27);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 31);
      dtB = new Date(2001, 0, 1);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "quarter";
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2001, 2, 1);
      t.is(4, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 1);
      dtB = new Date(2001, 0, 1);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "month";
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2001, 2, 1);
      t.is(13, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 1);
      dtB = new Date(2001, 0, 1);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "week";
      dtA = new Date(2000, 1, 1);
      dtB = new Date(2000, 1, 8);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 1, 28);
      dtB = new Date(2000, 2, 6);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 2, 6);
      dtB = new Date(2000, 1, 28);
      t.is(-1, date.difference(dtA, dtB, interv));
      interv = "day";
      dtA = new Date(2000, 1, 29);
      dtB = new Date(2000, 2, 1);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 31);
      dtB = new Date(2001, 0, 1);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2005, 3, 3);
      dtB = new Date(2005, 3, 4);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "weekday";
      dtA = new Date(2006, 7, 3);
      dtB = new Date(2006, 7, 11);
      t.is(6, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 4);
      dtB = new Date(2006, 7, 11);
      t.is(5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 5);
      dtB = new Date(2006, 7, 11);
      t.is(5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 6);
      dtB = new Date(2006, 7, 11);
      t.is(5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 7);
      dtB = new Date(2006, 7, 11);
      t.is(4, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 7);
      dtB = new Date(2006, 7, 13);
      t.is(4, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 7);
      dtB = new Date(2006, 7, 14);
      t.is(5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 7);
      dtB = new Date(2006, 7, 15);
      t.is(6, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 7);
      dtB = new Date(2006, 7, 28);
      t.is(15, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 2, 2);
      dtB = new Date(2006, 2, 28);
      t.is(18, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 11);
      dtB = new Date(2006, 7, 4);
      t.is(-5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 11);
      dtB = new Date(2006, 7, 5);
      t.is(-4, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 11);
      dtB = new Date(2006, 7, 6);
      t.is(-4, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 11);
      dtB = new Date(2006, 7, 7);
      t.is(-4, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 13);
      dtB = new Date(2006, 7, 7);
      t.is(-5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 14);
      dtB = new Date(2006, 7, 7);
      t.is(-5, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 15);
      dtB = new Date(2006, 7, 7);
      t.is(-6, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 28);
      dtB = new Date(2006, 7, 7);
      t.is(-15, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 2, 28);
      dtB = new Date(2006, 2, 2);
      t.is(-18, date.difference(dtA, dtB, interv));
      dtA = new Date(2006, 7, 5);
      dtB = new Date(2006, 7, 6);
      t.is(0, date.difference(dtA, dtB, interv));
      interv = "hour";
      dtA = new Date(2000, 11, 31, 23);
      dtB = new Date(2001, 0, 1, 0);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 31, 12);
      dtB = new Date(2001, 0, 1, 0);
      t.is(12, date.difference(dtA, dtB, interv));
      interv = "minute";
      dtA = new Date(2000, 11, 31, 23, 59);
      dtB = new Date(2001, 0, 1, 0, 0);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 1, 28, 23, 59);
      dtB = new Date(2000, 1, 29, 0, 0);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "second";
      dtA = new Date(2000, 11, 31, 23, 59, 59);
      dtB = new Date(2001, 0, 1, 0, 0, 0);
      t.is(1, date.difference(dtA, dtB, interv));
      interv = "millisecond";
      dtA = new Date(2000, 11, 31, 23, 59, 59, 999);
      dtB = new Date(2001, 0, 1, 0, 0, 0, 0);
      t.is(1, date.difference(dtA, dtB, interv));
      dtA = new Date(2000, 11, 31, 23, 59, 59, 0);
      dtB = new Date(2001, 0, 1, 0, 0, 0, 0);
      t.is(1000, date.difference(dtA, dtB, interv));
    }, function test_date_add_diff_year(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "year";
      dtA = new Date(2005, 11, 27);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2005, 11, 27);
      dtB = date.add(dtA, interv, -1);
      t.is(date.difference(dtA, dtB, interv), -1);
      dtA = new Date(2000, 1, 29);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 1, 29);
      dtB = date.add(dtA, interv, 5);
      t.is(date.difference(dtA, dtB, interv), 5);
      dtA = new Date(1900, 11, 31);
      dtB = date.add(dtA, interv, 30);
      t.is(date.difference(dtA, dtB, interv), 30);
      dtA = new Date(1995, 11, 31);
      dtB = date.add(dtA, interv, 35);
      t.is(date.difference(dtA, dtB, interv), 35);
    }, function test_date_add_diff_quarter(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "quarter";
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 1, 29);
      dtB = date.add(dtA, interv, 2);
      t.is(date.difference(dtA, dtB, interv), 2);
      dtA = new Date(2000, 1, 29);
      dtB = date.add(dtA, interv, 4);
      t.is(date.difference(dtA, dtB, interv), 4);
    }, function test_date_add_diff_month(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "month";
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 0, 31);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 1, 29);
      dtB = date.add(dtA, interv, 12);
      t.is(date.difference(dtA, dtB, interv), 12);
    }, function test_date_add_diff_week(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "week";
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
    }, function test_date_add_diff_day(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "day";
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2001, 0, 1);
      dtB = date.add(dtA, interv, 365);
      t.is(date.difference(dtA, dtB, interv), 365);
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 366);
      t.is(date.difference(dtA, dtB, interv), 366);
      dtA = new Date(2000, 1, 28);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2001, 1, 28);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 2, 1);
      dtB = date.add(dtA, interv, -1);
      t.is(date.difference(dtA, dtB, interv), -1);
      dtA = new Date(2001, 2, 1);
      dtB = date.add(dtA, interv, -1);
      t.is(date.difference(dtA, dtB, interv), -1);
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, -1);
      t.is(date.difference(dtA, dtB, interv), -1);
    }, function test_date_add_diff_weekday(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "weekday";
      dtA = new Date(2000, 0, 1);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 0, 2);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 0, 2);
      dtB = date.add(dtA, interv, 5);
      t.is(date.difference(dtA, dtB, interv), 5);
      dtA = new Date(2000, 0, 2);
      dtB = date.add(dtA, interv, 6);
      t.is(date.difference(dtA, dtB, interv), 6);
      dtA = new Date(2000, 0, 3);
      dtB = date.add(dtA, interv, 10);
      t.is(date.difference(dtA, dtB, interv), 10);
      dtA = new Date(2000, 0, 8);
      dtB = date.add(dtA, interv, -5);
      t.is(date.difference(dtA, dtB, interv), -5);
      dtA = new Date(2000, 0, 9);
      dtB = date.add(dtA, interv, -3);
      t.is(date.difference(dtA, dtB, interv), -3);
      dtA = new Date(2000, 0, 23);
      dtB = date.add(dtA, interv, -11);
      t.is(date.difference(dtA, dtB, interv), -11);
    }, function test_date_add_diff_hour(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "hour";
      dtA = new Date(2000, 0, 1, 11);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2001, 9, 28, 0);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2001, 9, 28, 23);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2001, 11, 31, 23);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
    }, function test_date_add_diff_minute(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      interv = "minute";
      dtA = new Date(2000, 11, 31, 23, 59);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 11, 27, 12, 2);
      dtB = date.add(dtA, interv, 60);
      t.is(date.difference(dtA, dtB, interv), 60);
    }, function test_date_add_diff_second(t) {
      var interv = '';
      var dtA = null;
      var dtB = null;
      console.debug("second");
      interv = "second";
      dtA = new Date(2000, 11, 31, 23, 59, 59);
      dtB = date.add(dtA, interv, 1);
      t.is(date.difference(dtA, dtB, interv), 1);
      dtA = new Date(2000, 11, 27, 8, 10, 59);
      dtB = date.add(dtA, interv, 60);
      t.is(date.difference(dtA, dtB, interv), 60);
    }]);
  });
})(require('process'));
